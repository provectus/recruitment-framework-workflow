# Tap — Frontend

React SPA for **Tap**, Provectus's internal recruitment workflow automation tool. Provides the web interface for uploading CVs/transcripts, reviewing AI-generated candidate evaluations, and managing recruitment workflows.


## Tech Stack

| Layer | Technology |
|-------|-----------|
| Framework | React 19 + TypeScript |
| Build | Vite 7, React Compiler (Babel plugin) |
| Routing | TanStack Router (file-based, auto code-splitting) |
| Styling | Tailwind CSS v4, shadcn/ui (new-york style) |
| Icons | Lucide React |
| Auth | Google OAuth 2.0 (corporate Workspace), token-based sessions |
| Package Manager | bun |


## Getting Started

### Prerequisites

- [Bun](https://bun.sh/) (latest)
- Backend API running at `http://localhost:8000` (see `app/backend/`)

### Setup

```bash
bun install
bun run dev
```

The dev server starts at `http://localhost:5173` with HMR. API requests to `/api/*` are proxied to the backend at `localhost:8000`.


## Commands

```bash
bun install                          # Install dependencies
bun run dev                          # Dev server with HMR
bun run build                        # Type-check + production build
bun run lint                         # ESLint
bun run preview                      # Preview production build
bunx shadcn@latest add <component>   # Add a shadcn/ui component
```


## Project Structure

```
src/
├── components/
│   ├── ui/              # shadcn/ui components (button, alert, avatar, etc.)
│   └── user-menu.tsx    # Authenticated user dropdown
├── lib/
│   ├── auth-api.ts      # API calls: login, logout, token refresh, user fetch
│   ├── auth-context.tsx  # AuthProvider + useAuth hook
│   └── utils.ts         # cn() utility (clsx + tailwind-merge)
├── routes/
│   ├── __root.tsx        # Root layout (header, nav, outlet)
│   ├── _authenticated.tsx # Auth guard — redirects to /login if unauthenticated
│   ├── _authenticated/
│   │   └── index.tsx     # Home page (authenticated)
│   ├── login.tsx         # Google OAuth login page
│   └── auth/             # Auth callback routes
├── index.css             # Tailwind imports + CSS variables
├── main.tsx              # App entrypoint: router + AuthProvider setup
└── routeTree.gen.ts      # Auto-generated (do not edit)
```


## Architecture

### Routing

File-based routing via TanStack Router. Add new routes as files under `src/routes/`. The route tree (`routeTree.gen.ts`) is auto-generated by the Vite plugin — do not edit it manually.

Protected routes live under `_authenticated/`. The `_authenticated.tsx` layout route checks `context.auth.isAuthenticated` and redirects to `/login` if needed.

### Authentication

Google OAuth 2.0 flow:
1. User clicks "Sign in with Google" → redirects to `/api/auth/login`
2. Backend handles the OAuth flow and sets session cookies
3. Frontend calls `/api/auth/me` to fetch the current user
4. Token refresh is handled transparently via `fetchWithRefresh()` in `auth-api.ts`

Auth state is managed by `AuthProvider` and consumed via the `useAuth()` hook. The router receives auth context so route guards can check authentication before loading.

### API Proxy

In development, Vite proxies `/api/*` requests to `http://localhost:8000`, stripping the `/api` prefix. This avoids CORS issues during local development.

### Styling

Tailwind CSS v4 with CSS variables for theming. shadcn/ui components are configured with the `new-york` style and slate base color. Use `cn()` from `@/lib/utils` to merge class names.


## Conventions

- **Path alias:** `@/` maps to `src/` (configured in `vite.config.ts` and `tsconfig.json`)
- **Package manager:** Always use `bun`, not npm or yarn
- **Components:** Use shadcn/ui for UI primitives; add new ones with `bunx shadcn@latest add <name>`
- **Route files:** Follow TanStack Router file conventions — the filename determines the URL path
- **Auto-generated files:** `routeTree.gen.ts` is managed by the TanStack Router Vite plugin; never edit manually
